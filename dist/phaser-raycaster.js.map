{"version":3,"sources":["webpack://PhaserRaycaster/webpack/universalModuleDefinition","webpack://PhaserRaycaster/webpack/bootstrap","webpack://PhaserRaycaster/./src/main.js","webpack://PhaserRaycaster/./src/map/config.js","webpack://PhaserRaycaster/./src/map/map-circle-methods.js","webpack://PhaserRaycaster/./src/map/map-container-methods.js","webpack://PhaserRaycaster/./src/map/map-core.js","webpack://PhaserRaycaster/./src/map/map-line-methods.js","webpack://PhaserRaycaster/./src/map/map-polygon-methods.js","webpack://PhaserRaycaster/./src/map/map-rectangle-methods.js","webpack://PhaserRaycaster/./src/map/segmentsCount.js","webpack://PhaserRaycaster/./src/ray/angle.js","webpack://PhaserRaycaster/./src/ray/cast.js","webpack://PhaserRaycaster/./src/ray/castCircle.js","webpack://PhaserRaycaster/./src/ray/castCone.js","webpack://PhaserRaycaster/./src/ray/cone.js","webpack://PhaserRaycaster/./src/ray/config.js","webpack://PhaserRaycaster/./src/ray/origin.js","webpack://PhaserRaycaster/./src/ray/range.js","webpack://PhaserRaycaster/./src/ray/ray-core.js","webpack://PhaserRaycaster/./src/ray/ray.js","webpack://PhaserRaycaster/./src/raycaster-core.js"],"names":["PhaserRaycaster","scene","systems","sys","settings","isBooted","events","once","boot","register","PluginManager","prototype","eventEmitter","on","start","preUpdate","update","postUpdate","pause","resume","sleep","wake","shutdown","destroy","test","name","console","log","time","delta","undefined","createRaycaster","options","_Raycaster","constructor","require","Raycaster","module","exports","config","object","type","getPoints","_getPolygonPoints","getSegments","_getPolygonSegments","updateMap","_updatePolygonMap","_getArcPoints","_getArcSegments","_updateArcMap","_getLinePoints","_getLineSegments","_updateLineMap","_getContainerPoints","_getContainerSegments","_updateContainerMap","_getRectanglePoints","_getRectangleSegments","_updateRectangleMap","dynamic","segmentCount","ray","_points","length","points","offset","Phaser","Geom","Point","x","displayWidth","originX","y","displayHeight","originY","rayA","Line","rayB","c","rotation","vector","SetToAngle","Angle","Length","cB","getPointB","origin","rayLength","Math","sqrt","pow","radius","scaleX","angle","dAngle","asin","push","_segments","scaleY","geom","segments","newPoints","point","i","getCircles","tempRay","_raycaster","createRay","list","child","map","data","get","container","iterate","setDataEnabled","set","childPoints","segment","pointA","getPointA","pointB","vectorA","vectorB","bind","iLength","childA","mapA","j","jLength","childB","mapB","Intersects","RectangleToRectangle","getBounds","segmentA","segmentB","intersection","LineToLine","Map","active","getIntersections","rectangle","line","polygon","arc","setSegmentCount","closePath","last","getTopLeft","getTopRight","getBottomRight","getBottomLeft","count","setAngle","Normalize","_ray","range","setAngleDeg","DegToRad","cast","closestIntersection","closestDistance","boundingBox","intersections","GetLineToRectangle","distance","Distance","Between","target","objects","mappedObjects","Equals","isTangent","circleIntersections","circle","Circle","GetLineToCircle","x1","y1","ignoreNotIntersectedRays","castCircle","originalAngle","maps","rayTargets","testedObjects","boundsInRange","objectB","sort","a","b","intersectionA","intersectionB","castCone","cone","minAngle","maxAngle","angleOffset","coneDeg","angleOffsetDeg","RadToDeg","ShortestBetween","abs","setCone","setConeDeg","setTo","angleDeg","detectionRange","detectionRangeCircle","setOrigin","setRange","MAX_SAFE_INTEGER","setDetectionRange","bounds","objectBounds","CircleToRectangle","Ray","raycaster","setRay","version","graphics","sortedPoints","mapSegmentCount","physics","world","setOptions","autoUpdate","add","lineStyle","width","color","fillStyle","mapGameObjects","setBoundingBox","height","Rectangle","left","top","right","bottom","Array","isArray","includes","removeMappedObjects","index","indexOf","splice","mapppedObject"],"mappings":"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","file":"phaser-raycaster.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"PhaserRaycaster\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PhaserRaycaster\"] = factory();\n\telse\n\t\troot[\"PhaserRaycaster\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","var PhaserRaycaster = function (scene)\r\n{\r\n    //The Scene that owns this plugin\r\n    this.scene = scene;\r\n\r\n    this.systems = scene.sys;\r\n\r\n    if (!scene.sys.settings.isBooted)\r\n    {\r\n        scene.sys.events.once('boot', this.boot, this);\r\n    }\r\n};\r\n\r\n//Static function called by the PluginFile Loader.\r\nPhaserRaycaster.register = function (PluginManager)\r\n{\r\n    //  Register this plugin with the PluginManager, so it can be added to Scenes.\r\n\r\n    //  The first argument is the name this plugin will be known as in the PluginManager. It should not conflict with already registered plugins.\r\n    //  The second argument is a reference to the plugin object, which will be instantiated by the PluginManager when the Scene boots.\r\n    //  The third argument is the local mapping. This will make the plugin available under `this.sys.base` and also `this.base` from a Scene if\r\n    //  it has an entry in the InjectionMap.\r\n    PluginManager.register('PhaserRaycaster', PhaserRaycaster, 'base');\r\n};\r\n\r\nPhaserRaycaster.prototype = {\r\n\r\n    //  Called when the Plugin is booted by the PluginManager.\r\n    //  If you need to reference other systems in the Scene (like the Loader or DisplayList) then set-up those references now, not in the constructor.\r\n    boot: function ()\r\n    {\r\n        var eventEmitter = this.systems.events;\r\n\r\n        //  Listening to the following events is entirely optional, although we would recommend cleanly shutting down and destroying at least.\r\n        //  If you don't need any of these events then remove the listeners and the relevant methods too.\r\n\r\n        eventEmitter.on('start', this.start, this);\r\n\r\n        eventEmitter.on('preupdate', this.preUpdate, this);\r\n        eventEmitter.on('update', this.update, this);\r\n        eventEmitter.on('postupdate', this.postUpdate, this);\r\n\r\n        eventEmitter.on('pause', this.pause, this);\r\n        eventEmitter.on('resume', this.resume, this);\r\n\r\n        eventEmitter.on('sleep', this.sleep, this);\r\n        eventEmitter.on('wake', this.wake, this);\r\n\r\n        eventEmitter.on('shutdown', this.shutdown, this);\r\n        eventEmitter.on('destroy', this.destroy, this);\r\n    },\r\n\r\n    //A test method.\r\n    test: function (name)\r\n    {\r\n        console.log('RaycasterPlugin says hello ' + name + '!');\r\n    },\r\n\r\n    //Called when a Scene is started by the SceneManager. The Scene is now active, visible and running.\r\n    start: function ()\r\n    {\r\n    },\r\n\r\n    //Called every Scene step - phase 1\r\n    preUpdate: function (time, delta)\r\n    {\r\n    },\r\n\r\n    //Called every Scene step - phase 2\r\n    update: function (time, delta)\r\n    {\r\n    },\r\n\r\n    //Called every Scene step - phase 3\r\n    postUpdate: function (time, delta)\r\n    {\r\n    },\r\n\r\n    //Called when a Scene is paused. A paused scene doesn't have its Step run, but still renders.\r\n    pause: function ()\r\n    {\r\n    },\r\n\r\n    //Called when a Scene is resumed from a paused state.\r\n    resume: function ()\r\n    {\r\n    },\r\n\r\n    //Called when a Scene is put to sleep. A sleeping scene doesn't update or render, but isn't destroyed or shutdown. preUpdate events still fire.\r\n    sleep: function ()\r\n    {\r\n    },\r\n\r\n    //Called when a Scene is woken from a sleeping state.\r\n    wake: function ()\r\n    {\r\n    },\r\n\r\n    //Called when a Scene shuts down, it may then come back again later (which will invoke the 'start' event) but should be considered dormant.\r\n    shutdown: function ()\r\n    {\r\n    },\r\n\r\n    //Called when a Scene is destroyed by the Scene Manager. There is no coming back from a destroyed Scene, so clear up all resources here.\r\n    destroy: function ()\r\n    {\r\n        this.shutdown();\r\n\r\n        this.scene = undefined;\r\n    },\r\n\r\n    //Create Raycaster object\r\n    createRaycaster: function(options = {}) {\r\n        options.scene = this.scene;\r\n        return new this._Raycaster(options);\r\n    }\r\n\r\n};\r\n\r\nPhaserRaycaster.prototype.constructor = PhaserRaycaster;\r\nPhaserRaycaster.prototype._Raycaster = require('./raycaster-core.js').Raycaster;\r\n\r\n//Make sure you export the plugin for webpack to expose\r\n\r\nmodule.exports = PhaserRaycaster;\r\n","/**\n * Configure map on creation.\n *\n * @function Map.config\n * @since 0.6.0\n *\n * @param {object} [options] - Ray's congfiguration options. May include:\n * - {object} object - Mapped game object\n * - {string} [type] - Map type. If not defined, will be determined from object\n * - {boolean} [dynamic] = false - If set true, map will be dynamic (updated on scene update event).\n * - {integer} [segmentCount] = 0 - Circle map's segment count. If set to 0, map won't be generating segments and relay only on generated tangent point to actually testing ray.\n *\n * @return {object} Map object.\n */\nexport function config(options) {\n    this.object = options.object;\n    //object type\n    if(options.type === undefined)\n        options.type = options.object.type;\n    this.type = options.type;\n\n    switch(options.type) {\n        case 'Polygon':\n            this.getPoints = this._getPolygonPoints;\n            this.getSegments = this._getPolygonSegments;\n            this.updateMap = this._updatePolygonMap;\n            break;\n        case 'Arc':\n            this.getPoints = this._getArcPoints;\n            this.getSegments = this._getArcSegments;\n            this.updateMap = this._updateArcMap;\n            break;\n        case 'Line':\n            this.getPoints = this._getLinePoints;\n            this.getSegments = this._getLineSegments;\n            this.updateMap = this._updateLineMap;\n            break;\n        case 'Container':\n            this.getPoints = this._getContainerPoints;\n            this.getSegments = this._getContainerSegments;\n            this.updateMap = this._updateContainerMap;\n            break;\n        default:\n            this.getPoints = this._getRectanglePoints;\n            this.getSegments = this._getRectangleSegments;\n            this.updateMap = this._updateRectangleMap;\n    }\n\n    //dynamic map\n    this.dynamic = (options.dynamic == true) ? true : false;\n    this.segmentCount = (options.segmentCount) ? options.segmentCount : 0;\n\n    return this;\n}\n","/*Map methods for circles*/\r\n/**\r\n * Get array of points on circle.\r\n *\r\n * @function Map._getArcPoints\r\n * @since 0.6.0\r\n *\r\n * @param {object} [ray] - Ray object. Used to generate points of rays tangent to circle, from ray origin.\r\n *\r\n * @return {array} Array of Phaser.GeomLine objects.\r\n */\r\nexport function getPoints(ray = false) {\r\n    if(this._points.length > 0)\r\n        return this._points;\r\n    \r\n    let points = [];\r\n    let offset = new Phaser.Geom.Point();\r\n    offset.x = this.object.x - this.object.displayWidth * (this.object.originX - 0.5);\r\n    offset.y = this.object.y - this.object.displayHeight * (this.object.originY - 0.5);\r\n\r\n    //calculate tangent rays\r\n    if(ray) {\r\n        let rayA = new Phaser.Geom.Line();\r\n        let rayB = new Phaser.Geom.Line();\r\n        let c;\r\n        \r\n        let rotation = this.object.rotation;\r\n        \r\n        if(rotation !== 0) {\r\n            let vector = new Phaser.Geom.Line(this.object.x, this.object.y, offset.x, offset.y);\r\n            Phaser.Geom.Line.SetToAngle(vector, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vector) + rotation, Phaser.Geom.Line.Length(vector));\r\n            let cB = vector.getPointB();\r\n            c = new Phaser.Geom.Line(ray.origin.x, ray.origin.y, cB.x, cB.y);\r\n        }\r\n        else { \r\n            c = new Phaser.Geom.Line(ray.origin.x, ray.origin.y, offset.x, offset.y);\r\n        }\r\n\r\n        let rayLength = Math.sqrt(Math.pow(Phaser.Geom.Line.Length(c), 2) - Math.pow(this.object.radius * this.object.scaleX, 2));\r\n\r\n        //ray angle\r\n        let angle = Phaser.Geom.Line.Angle(c);\r\n        let dAngle = Math.asin((this.object.radius * this.object.scaleX) / Phaser.Geom.Line.Length(c));\r\n        Phaser.Geom.Line.SetToAngle(rayA, ray.origin.x, ray.origin.y, angle - dAngle, rayLength);\r\n        Phaser.Geom.Line.SetToAngle(rayB, ray.origin.x, ray.origin.y, angle + dAngle, rayLength);\r\n\r\n        //adding tangent points\r\n        points.push(rayA.getPointB());\r\n        points.push(rayB.getPointB());\r\n    }\r\n\r\n    return points;\r\n};\r\n\r\n/**\r\n * Get array of segments representing circle.\r\n *\r\n * @function Map._getArcSegments\r\n * @since 0.6.0\r\n *\r\n *\r\n * @return {array} Array of Phaser.Geom.Line objects.\r\n */\r\nexport function getSegments() {\r\n    return this._segments;\r\n};\r\n\r\n/**\r\n * Update circle's map of points and segments. If segmentCount == 0. Map is generated dynamically by calculating points of rays tangent to circle, from ray origin.\r\n *\r\n * @function Map._updateArcMap\r\n * @since 0.6.0\r\n *\r\n *\r\n * @return {object} Map object.\r\n */\r\nexport function updateMap() {\r\n    if(!this.segmentCount) {\r\n        this._points = [];\r\n        this._segments = [];\r\n        return this;\r\n    }\r\n    \r\n    //calculate offset based on object position and origin point\r\n    let offset = new Phaser.Geom.Point();\r\n    offset.x = this.object.x - this.object.displayWidth * this.object.originX + this.object.radius * this.object.scaleX;\r\n    offset.y = this.object.y - this.object.displayHeight * this.object.originY + this.object.radius * this.object.scaleY;\r\n\r\n    //get points surrounding circle\r\n    let points = this.object.geom.getPoints(this.segmentCount);\r\n    let segments = []\r\n\r\n    //set points\r\n    //calculate positions after object's rotation\r\n    let rotation = this.object.rotation;\r\n    if(rotation !== 0) {\r\n        let newPoints = [];\r\n        for(let point of points) {\r\n            let vector = new Phaser.Geom.Line(this.object.x, this.object.y, this.object.x + (point.x + this.object.radius) * this.object.scaleX, this.object.y + (point.y + this.object.radius) * this.object.scaleY);\r\n            Phaser.Geom.Line.SetToAngle(vector, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vector) + rotation, Phaser.Geom.Line.Length(vector));\r\n            newPoints.push(vector.getPointB());\r\n        }\r\n        points = newPoints;\r\n    }\r\n    //if rotation === 0\r\n    else {\r\n        for(let point of points) {\r\n            point.x = point.x * this.object.scaleX + offset.x;\r\n            point.y = point.y * this.object.scaleY + offset.y;\r\n        }\r\n    }\r\n\r\n    //set segments\r\n    for(let i = 0, length = points.length; i < length; i++) {\r\n        if(i+1 < length)\r\n        segments.push(new Phaser.Geom.Line(points[i].x, points[i].y, points[i+1].x, points[i+1].y));\r\n        else\r\n        segments.push(new Phaser.Geom.Line(points[i].x, points[i].y, points[0].x, points[0].y));\r\n    }\r\n\r\n    this._points = points;\r\n    this._segments = segments;\r\n    return this;\r\n};\r\n","/*Map methods for containers*/\n/**\n * Get array of container's children points.\n *\n * @function Map._getContainerPoints\n * @since 0.7.1\n *\n * @param {object} [ray] - Ray object.\n *\n * @return {array} Array of points.\n */\nexport function getPoints(ray = false, getCircles = false) {\n    let points = [];\n    if(!getCircles)\n        points = this._points;\n    //calculate offset based on container position and origin point\n    let offset = new Phaser.Geom.Point();\n    offset.x = this.object.x - this.object.displayWidth * this.object.originX;\n    offset.y = this.object.y - this.object.displayHeight * this.object.originY;\n\n    //get tangent points of container's circles\n    if(ray){\n        //create temporary ray\n        let vector = new Phaser.Geom.Line(0, 0, ray.origin.x - offset.x, ray.origin.y - offset.y);\n        Phaser.Geom.Line.SetToAngle(vector, 0, 0, Phaser.Geom.Line.Angle(vector) - this.object.rotation, Phaser.Geom.Line.Length(vector));\n\n        let tempRay = ray._raycaster.createRay({\n            origin: {\n                x: vector.getPointB().x,\n                y: vector.getPointB().y\n            }\n        });\n\n        for(let child of this.object.list){\n            if(child.type === 'Arc'){\n\n                let map = child.data.get('raycasterMap');\n                if(map._points.length == 0){\n                    for(let point of map.getPoints(tempRay, true)){\n                        let vector = new Phaser.Geom.Line(0, 0, point.x, point.y);\n                        Phaser.Geom.Line.SetToAngle(vector, 0, 0, Phaser.Geom.Line.Angle(vector) + this.object.rotation, Phaser.Geom.Line.Length(vector));\n\n                        points.push(new Phaser.Geom.Point(vector.getPointB().x + offset.x, vector.getPointB().y + offset.y));\n                    }\n                }\n            }\n            else if(child.type === 'Container') {\n                for(let point of child.data.get('raycasterMap').getPoints(tempRay, true)){\n                    if(this.object.rotation !== 0) {\n                        let vector = new Phaser.Geom.Line(this.object.x, this.object.y, point.x * this.object.scaleX + offset.x, point.y * this.object.scaleY + offset.y);\n                        Phaser.Geom.Line.SetToAngle(vector, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vector) + this.object.rotation, Phaser.Geom.Line.Length(vector));\n                        points.push(vector.getPointB());\n                    }\n                    //if rotation === 0\n                    else\n                        points.push(new Phaser.Geom.Point(point.x * this.object.scaleX + offset.x, point.y * this.object.scaleX + offset.y));\n                }\n            }\n\n        }\n    }\n\n    return points;\n};\n\n/**\n * Get array of segments representing container's children.\n *\n * @function Map._getContainerSegments\n * @since 0.7.1\n *\n *\n * @return {array} Array of Phaser.Geom.Line objects.\n */\nexport function getSegments(ray = false) {\n    return this._segments;\n};\n\n/**\n * Update containers's map of points and segments.\n *\n * @function Map._updateContainerleMap\n * @since 0.7.1\n *\n *\n * @return {object} Map object.\n */\nexport function updateMap() {\n    let points = [];\n    let segments = [];\n    let container = this.object;\n\n    //calculate offset based on container position and origin point\n    let offset = new Phaser.Geom.Point();\n    offset.x = this.object.x - this.object.displayWidth * this.object.originX;\n    offset.y = this.object.y - this.object.displayHeight * this.object.originY;\n\n    let rotation = container.rotation;\n\n    //iterate through container's children\n    container.iterate(function(child){\n        if(!child.data)\n            child.setDataEnabled();\n\n        //get child map\n        let map = child.data.get('raycasterMap');\n        if(!map) {\n            map = new this.constructor({\n                object: child,\n                segmentCount: this.segmentCount\n            });\n            child.data.set('raycasterMap', map);\n        }\n        else\n            map.updateMap();\n\n        //add child points\n        let childPoints = [];\n        for(let point of map.getPoints()) {\n            //calculate positions after container's rotation\n            if(rotation !== 0) {\n                let vector = new Phaser.Geom.Line(this.object.x, this.object.y, point.x * this.object.scaleX + offset.x, point.y * this.object.scaleY + offset.y);\n                Phaser.Geom.Line.SetToAngle(vector, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vector) + rotation, Phaser.Geom.Line.Length(vector));\n                points.push(vector.getPointB());\n            }\n            //if rotation === 0\n            else\n                points.push(new Phaser.Geom.Point(point.x * container.scaleX + offset.x, point.y * container.scaleX + offset.y));\n\n            childPoints.push(points[points.length - 1])\n        }\n\n        //add child segments\n        for(let segment of map.getSegments()) {\n            //calculate positions after container's rotation\n            if(rotation !== 0) {\n                let pointA = segment.getPointA();\n                let pointB = segment.getPointB();\n                let vectorA = new Phaser.Geom.Line(this.object.x, this.object.y, pointA.x * this.object.scaleX + offset.x, pointA.y * this.object.scaleY + offset.y);\n                let vectorB = new Phaser.Geom.Line(this.object.x, this.object.y, pointB.x * this.object.scaleX + offset.x, pointB.y * this.object.scaleY + offset.y);\n                Phaser.Geom.Line.SetToAngle(vectorA, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vectorA) + rotation, Phaser.Geom.Line.Length(vectorA));\n                Phaser.Geom.Line.SetToAngle(vectorB, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vectorB) + rotation, Phaser.Geom.Line.Length(vectorB));\n\n                segments.push(new Phaser.Geom.Line(vectorA.getPointB().x, vectorA.getPointB().y, vectorB.getPointB().x, vectorB.getPointB().y));\n            }\n            //if rotation === 0\n            else\n                segments.push(new Phaser.Geom.Line(segment.getPointA().x * container.scaleX + offset.x, segment.getPointA().y * container.scaleY + offset.y, segment.getPointB().x * container.scaleX + offset.x, segment.getPointB().y * container.scaleY + offset.y));\n        }\n\n    }.bind(this));\n\n    //get children intersections\n    for(let i = 0, iLength = container.list.length; i < iLength; i++){\n        let childA = container.list[i];\n        let mapA = childA.data.get('raycasterMap');\n\n        for(let j = i+1, jLength = container.list.length; j < jLength; j++){\n            let childB = container.list[j];\n            let mapB = childB.data.get('raycasterMap');\n            //check if bounding boxes overlap\n            if(!Phaser.Geom.Intersects.RectangleToRectangle(childA.getBounds(), childB.getBounds()))\n                continue;\n\n            //find objects intersections\n            for(let segmentA of mapA.getSegments()) {\n                for(let segmentB of mapB.getSegments()) {\n                    let intersection = [];\n                    if(!Phaser.Geom.Intersects.LineToLine(segmentA, segmentB, intersection))\n                        continue;\n                    \n                     //calculate positions after container's rotation\n                    if(rotation !== 0) {\n                        let vector = new Phaser.Geom.Line(this.object.x, this.object.y, intersection.x * this.object.scaleX + offset.x, intersection.y * this.object.scaleY + offset.y);\n                        Phaser.Geom.Line.SetToAngle(vector, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vector) + rotation, Phaser.Geom.Line.Length(vector));\n                        points.push(vector.getPointB());\n                    }\n                    //if rotation === 0\n                    else\n                        points.push(new Phaser.Geom.Point(intersection.x * container.scaleX + offset.x, intersection.y * container.scaleX + offset.y));\n                }\n            }\n        }\n    }\n\n    this._points = points;\n    this._segments = segments;\n\n    return this;\n};\n","/**\r\n * @classdesc\r\n *\r\n * Map class responible for mapping game objects.\r\n *\r\n * @class Map\r\n * @memberof Raycaster\r\n * @constructor\r\n * @since 6.0.0\r\n *\r\n * @param {object} options - Map specific configuration settings.\r\n * @param {Raycaster} [raycaster] - Parent raycaster object.\r\n */\r\nexport function Map(options) {\r\n    this.type;\r\n    this.active;\r\n    this.dynamic;\r\n    this.object;\r\n    this._points = [];\r\n    this._segments = [];\r\n    this.getPoints;\r\n    this.getSegments;\r\n    this.getIntersections;\r\n    this.segmentCount = 0;\r\n\r\n    this.config(options);\r\n    this.updateMap();\r\n\r\n    return this;\r\n};\r\n\r\nlet rectangle = require('./map-rectangle-methods.js');\r\nlet line = require('./map-line-methods.js');\r\nlet polygon = require('./map-polygon-methods.js');\r\nlet arc = require('./map-circle-methods.js');\r\nlet container = require('./map-container-methods.js');\r\n\r\nMap.prototype = {\r\n    config: require('./config.js').config,\r\n    setSegmentCount: require('./segmentsCount.js').setSegmentCount,\r\n    //methods for rectangle maps\r\n    _getRectanglePoints: rectangle.getPoints,\r\n    _getRectangleSegments: rectangle.getSegments,\r\n    _updateRectangleMap: rectangle.updateMap,\r\n    //methods for line maps\r\n    _getLinePoints: line.getPoints,\r\n    _getLineSegments: line.getSegments,\r\n    _updateLineMap: line.updateMap,\r\n    //methods for polygon maps\r\n    _getPolygonPoints: polygon.getPoints,\r\n    _getPolygonSegments: polygon.getSegments,\r\n    _updatePolygonMap: polygon.updateMap,\r\n    //methods for circle maps\r\n    _getArcPoints: arc.getPoints,\r\n    _getArcSegments: arc.getSegments,\r\n    _updateArcMap: arc.updateMap,\r\n    //methods for container maps\r\n    _getContainerPoints: container.getPoints,\r\n    _getContainerSegments: container.getSegments,\r\n    _updateContainerMap: container.updateMap\r\n};\r\n\r\nMap.prototype.constructor = Map;\r\n","/*Map methods for lines*/\r\n/**\r\n * Get array of points for line.\r\n *\r\n * @function Map._getLinePoints\r\n * @since 0.6.0\r\n *\r\n * @param {object} [ray] - Ray object.\r\n *\r\n * @return {array} Array of points.\r\n */\r\nexport function getPoints(ray = false) {\r\n    return this._points;\r\n};\r\n\r\n/**\r\n * Get array of segments representing line.\r\n *\r\n * @function Map._getLineSegments\r\n * @since 0.6.0\r\n *\r\n *\r\n * @return {array} Array of Phaser.Geom.Line objects.\r\n */\r\nexport function getSegments() {\r\n    return this._segments;\r\n};\r\n\r\n/**\r\n * Update line's map of points and segments.\r\n *\r\n * @function Map._updateLineMap\r\n * @since 0.6.0\r\n *\r\n *\r\n * @return {object} Map object.\r\n */\r\nexport function updateMap() {\r\n    let points = [];\r\n    let segments = [];\r\n    \r\n    //calculate offset based on object position and origin point\r\n    let offset = new Phaser.Geom.Point();\r\n    offset.x = this.object.x - this.object.displayWidth * this.object.originX;\r\n    offset.y = this.object.y - this.object.displayHeight * this.object.originY;\r\n    let pointA = this.object.geom.getPointA();\r\n    let pointB = this.object.geom.getPointB();\r\n\r\n    //calculate positions after object's rotation\r\n    let rotation = this.object.rotation;\r\n    if(rotation !== 0) {\r\n        let vectorA = new Phaser.Geom.Line(this.object.x, this.object.y, pointA.x * this.object.scaleX + offset.x, pointA.y * this.object.scaleY + offset.y);\r\n        Phaser.Geom.Line.SetToAngle(vectorA, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vectorA) + rotation, Phaser.Geom.Line.Length(vectorA));\r\n        pointA = vectorA.getPointB();\r\n\r\n        let vectorB = new Phaser.Geom.Line(this.object.x, this.object.y, pointB.x * this.object.scaleX + offset.x, pointB.y * this.object.scaleY + offset.y);\r\n        Phaser.Geom.Line.SetToAngle(vectorB, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vectorB) + rotation, Phaser.Geom.Line.Length(vectorB));\r\n        pointB = vectorB.getPointB();\r\n\r\n        //set points\r\n        points.push(new Phaser.Geom.Point(pointA.x, pointA.y));\r\n        points.push(new Phaser.Geom.Point(pointB.x, pointB.y));\r\n        //set segment\r\n        segments.push(new Phaser.Geom.Line(pointA.x, pointA.y, pointB.x, pointB.y));\r\n    }\r\n    //if rotation === 0\r\n    else {\r\n        //set points\r\n        points.push(new Phaser.Geom.Point(pointA.x * this.object.scaleX + offset.x, pointA.y * this.object.scaleY + offset.y));\r\n        points.push(new Phaser.Geom.Point(pointB.x * this.object.scaleX + offset.x, pointB.y * this.object.scaleY + offset.y));\r\n        //set segment\r\n        segments.push(new Phaser.Geom.Line(pointA.x * this.object.scaleX + offset.x, pointA.y * this.object.scaleY + offset.y, pointB.x + offset.x * this.object.scaleX, pointB.y * this.object.scaleY + offset.y));\r\n    }\r\n    \r\n\r\n    this._points = points;\r\n    this._segments = segments;\r\n    return this;\r\n};\r\n","/*Map methods for polygons*/\r\n/**\r\n * Get array of polygon's points.\r\n *\r\n * @function Map._getPolygonPoints\r\n * @since 0.6.0\r\n *\r\n * @param {object} [ray] - Ray object.\r\n *\r\n * @return {array} Array of points.\r\n */\r\nexport function getPoints(ray = false) {\r\n    return this._points;\r\n};\r\n\r\n/**\r\n * Get array of segments representing polygon.\r\n *\r\n * @function Map._getPolygonSegments\r\n * @since 0.6.0\r\n *\r\n *\r\n * @return {array} Array of Phaser.Geom.Line objects.\r\n */\r\nexport function getSegments() {\r\n    return this._segments;\r\n};\r\n\r\n/**\r\n * Update polygon's map of points and segments.\r\n *\r\n * @function Map._updatePolygonMap\r\n * @since 0.6.0\r\n *\r\n *\r\n * @return {object} Map object.\r\n */\r\nexport function updateMap() {\r\n    let points = [];\r\n    let segments = [];\r\n    \r\n    //calculate offset based on object position and origin point\r\n    let offset = new Phaser.Geom.Point();\r\n    offset.x = this.object.x - this.object.displayWidth * this.object.originX;\r\n    offset.y = this.object.y - this.object.displayHeight * this.object.originY;\r\n    //set points\r\n    //calculate positions after object's rotation\r\n    let rotation = this.object.rotation;\r\n    if(rotation !== 0) {\r\n        for(let point of this.object.geom.points) {\r\n            let vector = new Phaser.Geom.Line(this.object.x, this.object.y, point.x * this.object.scaleX + offset.x, point.y * this.object.scaleY + offset.y);\r\n            Phaser.Geom.Line.SetToAngle(vector, this.object.x, this.object.y, Phaser.Geom.Line.Angle(vector) + rotation, Phaser.Geom.Line.Length(vector));\r\n            points.push(vector.getPointB());\r\n        }\r\n    }\r\n    //if rotation === 0\r\n    else {\r\n        for(let point of this.object.geom.points) {\r\n            points.push(new Phaser.Geom.Point(point.x * this.object.scaleX + offset.x, point.y * this.object.scaleY + offset.y));\r\n        }\r\n    }\r\n\r\n    //set segments\r\n    for(let i = 0, length = points.length; i < length; i++) {\r\n        if(i+1 < length)\r\n            segments.push(new Phaser.Geom.Line(points[i].x, points[i].y, points[i+1].x, points[i+1].y));   \r\n    }\r\n    //if polygon is closed\r\n    if(this.object.closePath) {\r\n        let last = points.length - 1;\r\n        segments.push(new Phaser.Geom.Line(points[last].x, points[last].y, points[0].x, points[0].y));\r\n    }\r\n\r\n    this._points = points;\r\n    this._segments = segments;\r\n\r\n    return this;\r\n};\r\n","/*Map methods for rectangles*/\r\n/**\r\n * Get array of rectangle's points.\r\n *\r\n * @function Map._getRectanglePoints\r\n * @since 0.6.0\r\n *\r\n * @param {object} [ray] - Ray object.\r\n *\r\n * @return {array} Array of points.\r\n */\r\nexport function getPoints(ray = false) {\r\n    return this._points;\r\n};\r\n\r\n/**\r\n * Get array of segments representing rectangle.\r\n *\r\n * @function Map._getRectangleSegments\r\n * @since 0.6.0\r\n *\r\n *\r\n * @return {array} Array of Phaser.Geom.Line objects.\r\n */\r\nexport function getSegments() {\r\n    return this._segments;\r\n};\r\n\r\n/**\r\n * Update rectangle's map of points and segments.\r\n *\r\n * @function Map._updateRectangleMap\r\n * @since 0.6.0\r\n *\r\n *\r\n * @return {object} Map object.\r\n */\r\nexport function updateMap() {\r\n    let points = [];\r\n    let segments = [];\r\n\r\n    //set points\r\n    points = [\r\n        this.object.getTopLeft(),\r\n        this.object.getTopRight(),\r\n        this.object.getBottomRight(),\r\n        this.object.getBottomLeft()\r\n    ];\r\n\r\n    //set segments\r\n    for(let i = 0, length = points.length; i < length; i++) {\r\n        if(i+1 < length)\r\n        segments.push(new Phaser.Geom.Line(points[i].x, points[i].y, points[i+1].x, points[i+1].y));\r\n        else\r\n        segments.push(new Phaser.Geom.Line(points[i].x, points[i].y, points[0].x, points[0].y));\r\n    }\r\n\r\n    this._points = points;\r\n    this._segments = segments;\r\n\r\n    return this;\r\n};\r\n","/**\n * Set segment count for cirle's map.\n *\n * @function Map.setSegmentCount\n * @since 0.6.0\n *\n * @param {integer} [count] - Circle's map segments count.\n *\n * @return {object} Map object.\n */\nexport function setSegmentCount(count) {\n    this.segmentCount = count;\n        this.updateMap();\n        return this;\n}\n","/**\n * Set ray angle in radians.\n *\n * @function Ray.setAngle\n * @since 0.6.0\n *\n * @param {float} [angle] - Ray's angle in radians.\n *\n * @return {object} Ray object.\n */\nexport function setAngle(angle = 0) {\n    this.angle = Phaser.Math.Angle.Normalize(angle);\n    Phaser.Geom.Line.SetToAngle(this._ray, this.origin.x, this.origin.y, this.angle, this.range);\n    return this;\n}\n\n/**\n * Set ray angle in degrees.\n *\n * @function Ray.setAngleDeg\n * @since 0.6.1\n *\n * @param {float} [angle] - Ray's angle in degrees.\n *\n * @return {object} Ray object.\n */\nexport function setAngleDeg(angle = 0) {\n    this.angle = Phaser.Math.Angle.Normalize(Phaser.Math.DegToRad(angle));\n    Phaser.Geom.Line.SetToAngle(this._ray, this.origin.x, this.origin.y, this.angle, this.range);\n    return this;\n}\n","/**\n * Cast ray to find closest intersection with tested mapped objects.\n *\n * @function Ray.cast\n * @since 0.6.0\n *\n * @param {object} [options] - options that may include:\n * - {array} [objects] - Array of game objects to test. If not provided use all mapped game objects.\n * - {Phaser.Types.Math.Vector2Like} [target] - Ray's target point. Used in other casting methods to determine if ray was targeting mapped objects point.\n *\n * @return {Phaser.Types.Math.Vector2Like} / {boolean} - Point object of ray's closest intersection with tested objects. Returns false if no intersection has been found.\n */\nexport function cast(options = {}) {\n    let closestIntersection;\n    let closestDistance = this.range;\n    //if bounding box is defined check bounding box intersection\n    if(this._raycaster && this._raycaster.boundingBox) {\n        let intersections = [];\n        Phaser.Geom.Intersects.GetLineToRectangle(this._ray, this._raycaster.boundingBox.rectangle, intersections);\n        if(intersections.length === 1)\n            closestIntersection = intersections[0];\n        else if(intersections.length > 1) {\n            for(let intersection of intersections) {\n                let distance = Phaser.Math.Distance.Between(this.origin.x, this.origin.y, intersection.x, intersection.y);\n                if(distance < closestDistance) {\n                    closestDistance = distance;\n                    closestIntersection = intersection;\n                }\n            }\n        }\n        //if ray target is declared\n        else if(options.target){\n            let distance = Phaser.Math.Distance.Between(this.origin.x, this.origin.y, options.target.x, options.target.y);\n            //if target is within ray range\n            if(this.range > distance) {\n                closestDistance = distance;\n                closestIntersection = options.target;\n            }\n        }\n    }\n\n    //if no objects to cast ray were passed, use raycasters mapped objects\n    if(!options.objects) {\n        if(this._raycaster)\n            options.objects = this._raycaster.mappedObjects;\n        else\n            return intersections;\n    }\n    \n    for(let object of options.objects) {\n        //check if object is intersected by ray\n        if(!Phaser.Geom.Intersects.GetLineToRectangle(this._ray, object.getBounds()))\n            continue;\n\n        let map = object.data.get('raycasterMap');\n        \n        //check intersections\n        for(let segment of map.getSegments(this)) {\n            let intersection = [];\n\n            //if target point is segmemt point\n            if(options.target) {\n                if(\n                    Phaser.Geom.Point.Equals(options.target, segment.getPointA())\n                    || Phaser.Geom.Point.Equals(options.target, segment.getPointB())\n                ) {\n                    intersection = options.target;\n                }\n                else if(!Phaser.Geom.Intersects.LineToLine(this._ray, segment, intersection))\n                    continue;\n            }\n            //if no intersection continue\n            else if(!Phaser.Geom.Intersects.LineToLine(this._ray, segment, intersection))\n              continue;\n            \n            //get closest intersection\n            let distance = Phaser.Math.Distance.Between(this.origin.x, this.origin.y, intersection.x, intersection.y);\n            if(distance < closestDistance) {\n                closestDistance = distance;\n                closestIntersection = intersection;\n            }\n        }\n\n        //check arc intersections if its not\n        if(map.type === 'Arc') {\n           //if arc has generated points (besides tangent points to ray)\n            if(map._points.length > 0) {\n                continue;\n            }\n            \n            //check if target point is a circle tangent point to ray\n            if(options.target) {\n                let points = map.getPoints(this);\n                let isTangent = false;\n                for(let point of points) {\n\n                    if(Phaser.Geom.Point.Equals(options.target, point)) {\n                        //get closest intersection\n                        let distance = Phaser.Math.Distance.Between(this.origin.x, this.origin.y, point.x, point.y);\n\n                        if(distance < closestDistance) {\n                            closestDistance = distance;\n                            closestIntersection = point;\n                            isTangent = true;\n                            break;\n                        }\n                    }\n                }\n\n                if(isTangent)\n                    continue;\n            }\n\n            let circleIntersections = [];\n            let offset = new Phaser.Geom.Point();\n            offset.x = map.object.x - map.object.displayWidth * (map.object.originX - 0.5);\n            offset.y = map.object.y - map.object.displayHeight * (map.object.originY - 0.5);\n\n            //calculate circle's center after rotation\n            let rotation = map.object.rotation;\n            if(rotation !== 0) {\n                let vector = new Phaser.Geom.Line(map.object.x, map.object.y, offset.x, offset.y);\n                Phaser.Geom.Line.SetToAngle(vector, map.object.x, map.object.y, Phaser.Geom.Line.Angle(vector) + rotation, Phaser.Geom.Line.Length(vector));\n                let cB = vector.getPointB();\n                offset.x = cB.x;\n                offset.y = cB.y;\n            }\n\n            //create transformed circle\n            let circle = new Phaser.Geom.Circle(offset.x, offset.y, map.object.radius * map.object.scaleX);\n\n            if(Phaser.Geom.Intersects.GetLineToCircle(this._ray, circle, circleIntersections)) {\n                for(let intersection of circleIntersections) {\n                    //get closest intersection\n                    let distance = Phaser.Math.Distance.Between(this._ray.x1, this._ray.y1, intersection.x, intersection.y);\n\n                    if(distance < closestDistance) {\n\n                        closestDistance = distance;\n                        closestIntersection = intersection;\n                    }\n                }\n            }\n        }\n    }\n\n    if(!closestIntersection)\n        return (this.ignoreNotIntersectedRays) ? false : this._ray.getPointB();\n    return new Phaser.Geom.Point(closestIntersection.x, closestIntersection.y);\n}\n","/**\n * Cast ray in all directions to find closest intersections with tested mapped objects.\n *\n * @function Ray.castCircle\n * @since 0.6.0\n *\n * @param {object} [options] - options that may include:\n * - {array} [objects] - Array of game objects to test. If not provided use all mapped game objects.\n *\n * @return {array} - Array of Point objects of ray's closest intersections with tested objects.\n */\nexport function castCircle(options = {}) {\n    let originalAngle = this.angle;\n    let intersections = [];\n    let maps = [];\n    let rayTargets = [];\n    let testedObjects = [];\n\n    //if no objects to cast ray were passed, use raycasters mapped objects\n    if(!options.objects) {\n        if(this._raycaster)\n            options.objects = this._raycaster.mappedObjects;\n        else\n            return intersections;\n\n        //if bounding box is defined add bounding box points to \n        if(this._raycaster && this._raycaster.boundingBox) {\n            for(let point of this._raycaster.boundingBox.points) {\n                rayTargets.push({\n                    point: point,\n                    angle: Phaser.Math.Angle.Between(this.origin.x, this.origin.y, point.x, point.y)\n                });\n            }\n        }\n\n        for(let i=0, iLength = options.objects.length; i < iLength; i++) {\n            let object = options.objects[i];\n            //if bound in range\n            if(!this.boundsInRange(object))\n                continue;\n            \n            testedObjects.push(object);\n\n            let map = object.data.get('raycasterMap');\n            maps.push(map);\n            //get points and angles\n            for(let point of map.getPoints(this)) {\n                rayTargets.push({\n                    point: point,\n                    angle: Phaser.Math.Angle.Between(this.origin.x, this.origin.y, point.x, point.y)\n                });\n            }\n\n            //get objects intersections\n            for(let j = i+1, jLength = options.objects.length; j < jLength; j++){\n                let objectB = options.objects[j];\n                let mapB = objectB.data.get('raycasterMap');\n                //check if bounding boxes overlap\n                if(!Phaser.Geom.Intersects.RectangleToRectangle(object.getBounds(), objectB.getBounds()))\n                    continue;\n                \n                //find objects intersections\n                for(let segmentA of map.getSegments(this)) {\n                    for(let segmentB of mapB.getSegments(this)) {\n                        let intersection = [];\n                        if(!Phaser.Geom.Intersects.LineToLine(segmentA, segmentB, intersection))\n                            continue;\n                        \n                        rayTargets.push({\n                            point: new Phaser.Geom.Point(intersection.x, intersection.y),\n                            angle: Phaser.Math.Angle.Between(this.origin.x, this.origin.y, intersection.x, intersection.y)\n                        });\n                    }\n                }\n            }\n        }\n\n        //sort target points by angle\n        rayTargets.sort(function(a, b){\n            //if rays towards points have the same angles promote closer one\n            if(a.angle == b.angle) {\n                if(Phaser.Math.Distance.Between(this.origin.x, this.origin.y, a.point.x, a.point.y) < Phaser.Math.Distance.Between(this.origin.x, this.origin.y, b.point.x, b.point.y))\n                    return 1;\n                else\n                    return -1;\n            }\n\n            return a.angle - b.angle;\n        }.bind(this));\n\n        //cast rays\n        for(let target of rayTargets){\n            this.setAngle(target.angle);\n            let intersection = this.cast({\n                objects: testedObjects,\n                target: target.point\n            });\n            if(intersection){\n                //if intersection hits target point cast two additional rays\n                if(Phaser.Geom.Point.Equals(target.point, intersection)) {\n                    this.setAngle(target.angle - 0.0001);\n                    let intersectionA = this.cast({\n                        objects: testedObjects\n                    });\n                    if(intersectionA)\n                        intersections.push(intersectionA);\n                    \n                    intersections.push(intersection);\n\n                    this.setAngle(target.angle + 0.0001);\n                    let intersectionB = this.cast({\n                        objects: testedObjects\n                    });\n                    if(intersectionB)\n                        intersections.push(intersectionB);\n\n                    continue;\n                }\n                intersections.push(intersection);\n            }\n        }\n    }\n\n    this.setAngle(originalAngle);\n    return intersections;\n}\n","/**\n * Cast ray in cone to find closest intersections with tested mapped objects.\n *\n * @function Ray.castCone\n * @since 0.7.0\n *\n * @param {object} [options] - options that may include:\n * - {array} [objects] - Array of game objects to test. If not provided use all mapped game objects.\n *\n * @return {array} - Array of Point objects of ray's closest intersections with tested objects.\n */\nexport function castCone(options = {}) {\n    let originalAngle = this.angle;\n    let intersections = [];\n    let maps = [];\n    let rayTargets = [];\n    let testedObjects = [];\n    let cone = this.cone;\n    let minAngle = 0;\n    let maxAngle = 0;\n    let angleOffset = 0;\n\n    //set cone\n    if(options.cone !== undefined)\n        cone = options.cone;\n    if(options.coneDeg !== undefined)\n        cone = Phaser.Math.DegToRad(options.coneDeg);\n\n    //set cone min and max angle\n    minAngle = this.angle - cone / 2;\n    maxAngle = this.angle + cone / 2;\n\n    //add min and max angle points\n    this.setAngle(minAngle);\n    rayTargets.push({\n        point: this._ray.getPointB(),\n        angle: minAngle,\n        angleOffsetDeg: Phaser.Math.RadToDeg(-cone / 2)\n    });\n\n    this.setAngle(maxAngle);\n    rayTargets.push({\n        point: this._ray.getPointB(),\n        angle: maxAngle,\n        angleOffsetDeg: Phaser.Math.RadToDeg(cone / 2)\n    });\n\n    //if no objects to cast ray were passed, use raycasters mapped objects\n    if(!options.objects) {\n        if(this._raycaster)\n            options.objects = this._raycaster.mappedObjects;\n        else\n            return intersections;\n\n        //if bounding box is defined add bounding box points to \n        if(this._raycaster && this._raycaster.boundingBox) {\n            for(let point of this._raycaster.boundingBox.points) {\n\n                let angle = Phaser.Math.Angle.Between(this.origin.x, this.origin.y, point.x, point.y);\n                let angleOffsetDeg = Phaser.Math.Angle.ShortestBetween(Phaser.Math.RadToDeg(angle), Phaser.Math.RadToDeg(originalAngle));\n\n                if(Math.abs(angleOffsetDeg) < Phaser.Math.RadToDeg(cone / 2)) {\n                    rayTargets.push({\n                        point: point,\n                        angle: angle,\n                        angleOffsetDeg: -angleOffsetDeg\n                    });\n                }\n            }\n        }\n    }\n\n    for(let i=0, iLength = options.objects.length; i < iLength; i++) {\n        let object = options.objects[i];\n        //if bound in range\n        if(!this.boundsInRange(object))\n            continue;\n        \n        testedObjects.push(object);\n\n        let map = object.data.get('raycasterMap');\n        maps.push(map);\n        //get points and angles\n        for(let point of map.getPoints(this)) {\n\n            let angle = Phaser.Math.Angle.Between(this.origin.x, this.origin.y, point.x, point.y);\n            let angleOffsetDeg = Phaser.Math.Angle.ShortestBetween(Phaser.Math.RadToDeg(angle), Phaser.Math.RadToDeg(originalAngle));\n\n            if(Math.abs(angleOffsetDeg) < Phaser.Math.RadToDeg(cone / 2)) {\n                rayTargets.push({\n                    point: point,\n                    angle: Phaser.Math.Angle.Between(this.origin.x, this.origin.y, point.x, point.y),\n                    angleOffsetDeg: -angleOffsetDeg\n                });\n            }\n        }\n\n        //get objects intersections\n        for(let j = i+1, jLength = options.objects.length; j < jLength; j++){\n            let objectB = options.objects[j];\n            let mapB = objectB.data.get('raycasterMap');\n            //check if bounding boxes overlap\n            if(!Phaser.Geom.Intersects.RectangleToRectangle(object.getBounds(), objectB.getBounds()))\n                continue;\n            \n            //find objects intersections\n            for(let segmentA of map.getSegments(this)) {\n                for(let segmentB of mapB.getSegments(this)) {\n                    let intersection = [];\n                    if(!Phaser.Geom.Intersects.LineToLine(segmentA, segmentB, intersection))\n                        continue;\n                    let angle = Phaser.Math.Angle.Between(this.origin.x, this.origin.y, intersection.x, intersection.y);\n                    let angleOffsetDeg = Phaser.Math.Angle.ShortestBetween(Phaser.Math.RadToDeg(angle), Phaser.Math.RadToDeg(originalAngle));\n\n                    if(Math.abs(angleOffsetDeg) < Phaser.Math.RadToDeg(cone / 2)) {\n                        rayTargets.push({\n                            point: new Phaser.Geom.Point(intersection.x, intersection.y),\n                            angle: Phaser.Math.Angle.Between(this.origin.x, this.origin.y, intersection.x, intersection.y),\n                            angleOffsetDeg: -angleOffsetDeg\n                        });\n                    }\n                }\n            }\n        }\n    }\n\n    //sort target points by angle\n    rayTargets.sort(function(a, b){\n        //if rays towards points have the same angles promote closer one\n        if(a.angle == b.angle) {\n            if(Phaser.Math.Distance.Between(this.origin.x, this.origin.y, a.point.x, a.point.y) < Phaser.Math.Distance.Between(this.origin.x, this.origin.y, b.point.x, b.point.y))\n                return 1;\n            else\n                return -1;\n        }\n\n        return a.angleOffsetDeg - b.angleOffsetDeg;\n    }.bind(this));\n\n    //cast rays\n    for(let target of rayTargets){\n        this.setAngle(target.angle);\n        let intersection = this.cast({\n            objects: testedObjects,\n            target: target.point\n        });\n        if(intersection){\n            //if intersection hits target point cast two additional rays\n            if(Phaser.Geom.Point.Equals(target.point, intersection)) {\n                this.setAngle(target.angle - 0.0001);\n                let intersectionA = this.cast({\n                    objects: testedObjects\n                });\n                if(intersectionA)\n                    intersections.push(intersectionA);\n                \n                intersections.push(intersection);\n\n                this.setAngle(target.angle + 0.0001);\n                let intersectionB = this.cast({\n                    objects: testedObjects\n                });\n                if(intersectionB)\n                    intersections.push(intersectionB);\n\n                continue;\n            }\n            intersections.push(intersection);\n        }\n    }\n\n    this.setAngle(originalAngle);\n    return intersections;\n}\n","/**\n * Set ray's cone angle in radians.\n *\n * @function Ray.setAngle\n * @since 0.7.0\n *\n * @param {float} [cone] - Ray's cone angle in radians.\n *\n * @return {object} Ray object.\n */\nexport function setCone(cone = 0) {\n    this.cone = cone;\n    return this;\n}\n\n/**\n * Set ray's cone angle in degrees.\n *\n * @function Ray.setAngleDeg\n * @since 0.7.0\n *\n * @param {float} [cone] - Ray's cone angle in degrees.\n *\n * @return {object} Ray object.\n */\nexport function setConeDeg(cone = 0) {\n    this.cone = Phaser.Math.DegToRad(cone);\n    return this;\n}\n","/**\n * Configure ray on creation.\n *\n * @function Ray.config\n * @since 0.6.0\n *\n * @param {object} [options] - Ray's congfiguration options. May include:\n * - {Phaser.Types.Math.Vector2Like} [origin] = {x:0, y:0} - Ray's position.\n * - {float} [angle] = 0 - Ray's angle in radians.\n * - {float} [angleDeg] = 0 - Ray's angle in degrees.\n * - {float} [cone] = 0 - Ray's cone angle in radians.\n * - {float} [coneDeg] = 0 - Ray's cone angle in degrees.\n * - {integer} [range] = Phaser.Math.MAX_SAFE_INTEGER - Ray's range.\n * - {integer} [detectionRange] = Phaser.Math.MAX_SAFE_INTEGER - Maximum distance between ray's position and tested objects bounding boxes.\n * - {boolean} [ignoreNotIntersectedRays] = true - If set true, ray returns false when it didn't hit anything. Otherwise returns ray's target.\n *\n * @return {object} Ray object.\n */\nexport function config(options) {\n    this.object = options.object;\n    //origin\n    if(options.origin)\n        this.origin.setTo(options.origin.x, options.origin.y);\n\n    //angle\n    if(options.angle)\n        this.angle = Phaser.Math.Angle.Normalize(options.angle);\n\n    //angle deg\n    if(options.angleDeg)\n        this.angle = Phaser.Math.Angle.Normalize(Phaser.Math.DegToRad(options.angleDeg));\n\n    //cone angle\n    if(options.cone)\n        this.cone = options.cone;\n\n    //cone angle deg\n    if(options.coneDeg)\n        this.cone = Phaser.Math.DegToRad(options.coneDeg);\n\n    //range (0 = max)\n    if(options.range)\n        this.range = options.range;\n\n    //detection range (0 = max)\n    if(options.detectionRange)\n        this.detectionRange = options.detectionRange;\n\n    if(options.ignoreNotIntersectedRays !== undefined)\n        this.ignoreNotIntersectedRays = (options.ignoreNotIntersectedRays == true)\n    \n    Phaser.Geom.Line.SetToAngle(this._ray, this.origin.x, this.origin.y, this.angle, this.range);\n    this.detectionRangeCircle.setTo(this.origin.x, this.origin.y,this.detectionRange);\n\n    return this;\n}\n","/**\n * Set ray's position.\n *\n * @function Ray.setOrigin\n * @since 0.6.0\n *\n * @param {integer} x - X coordinate.\n * @param {integer} y - Y coordinate.\n *\n * @return {object} Ray object.\n */\nexport function setOrigin(x, y) {\n    this.origin.setTo(x, y);\n    Phaser.Geom.Line.SetToAngle(this._ray, this.origin.x, this.origin.y, this.angle, this.range);\n    this.detectionRangeCircle.setTo(this.origin.x, this.origin.y,this.detectionRange);\n    return this;\n}\n","/**\n * Set ray's range.\n *\n * @function Ray.setRange\n * @since 0.6.0\n *\n * @param {integer} [range] = Phaser.Math.MAX_SAFE_INTEGER - Ray's range.\n *\n * @return {object} Ray object.\n */\nexport function setRange(range = Phaser.Math.MAX_SAFE_INTEGER) {\n    this.range = range;\n    Phaser.Geom.Line.SetToAngle(this._ray, this.origin.x, this.origin.y, this.angle, this.range);\n    return this;\n}\n\n/**\n * Set ray's range.\n *\n * @function Ray.setRange\n * @since 0.6.0\n *\n * @param {integer} [detectionRange] = Phaser.Math.MAX_SAFE_INTEGER - Maximum distance between ray's position and tested objects bounding boxes.\n *\n * @return {object} Ray object.\n */\nexport function setDetectionRange(detectionRange = 0) {\n    this.detectionRange = detectionRange;\n    this.detectionRangeCircle.setTo(this.origin.x, this.origin.y,this.detectionRange);\n    return this;\n}\n\n/**\n * Test if object's bounding box is in ray's detection range.\n *\n * @function Ray.boundsInRange\n * @since 0.6.0\n *\n * @param {object} object - Tested object\n * @param {Phaser.Geom. Rectangle} / {boolean} [bounds] = false - Tested object's bounds. If not passed bounds will be generated.\n *\n * @return {boolean} Information if object is in ray's detection range.\n */\nexport function boundsInRange(object, bounds = false) {\n    if(!this.detectionRange)\n        return true;\n\n    let objectBounds;\n    if(bounds)\n        objectBounds = bounds;\n    else\n        objectBounds = object.getBounds();\n\n    if(Phaser.Geom.Intersects.CircleToRectangle(this.detectionRangeCircle, objectBounds))\n        return true;\n\n    return false;\n}\n","/**\r\n * @classdesc\r\n *\r\n * Ray class responible for casting ray's and testing their collisions with mapped objects.\r\n *\r\n * @class Ray\r\n * @memberof Raycaster\r\n * @constructor\r\n * @since 6.0.0\r\n *\r\n * @param {object} options - Ray specific configuration settings.\r\n * @param {Raycaster} [raycaster] - Parent raycaster object.\r\n */\r\nexport function Ray(options, raycaster) {\r\n    this.origin = new Phaser.Geom.Point();\r\n    this._ray = new Phaser.Geom.Line();\r\n    this.angle = 0;\r\n    this.cone = 0;\r\n    this.range = Phaser.Math.MAX_SAFE_INTEGER;\r\n    this.detectionRange = 0;\r\n    this.detectionRangeCircle = new Phaser.Geom.Circle();\r\n    this.ignoreNotIntersectedRays = true;\r\n    this.intersections = [];\r\n    this._raycaster = raycaster ? raycaster : false;\r\n\r\n    this.config(options);\r\n};\r\n\r\nRay.prototype = {\r\n    config: require('./config.js').config,\r\n    setRay: require('./ray.js').setRay,    \r\n    setOrigin: require('./origin.js').setOrigin,\r\n    setRange: require('./range.js').setRange,\r\n    setAngle: require('./angle.js').setAngle,\r\n    setAngleDeg: require('./angle.js').setAngleDeg,\r\n    setCone: require('./cone.js').setCone,\r\n    setConeDeg: require('./cone.js').setConeDeg,\r\n    setDetectionRange: require('./range.js').setDetectionRange,\r\n    boundsInRange: require('./range.js').boundsInRange,\r\n    cast: require('./cast.js').cast,\r\n    castCircle: require('./castCircle.js').castCircle,\r\n    castCone: require('./castCone.js').castCone\r\n};\r\n","/**\n * Set ray's position, direction (angle) and range.\n *\n * @function Ray.setAngle\n * @since 0.6.0\n *\n * @param {integer} x - X coordinate.\n * @param {integer} y - Y coordinate.\n * @param {float} [angle] - Ray's angle in radians.\n * @param {integer} [range] = Phaser.Math.MAX_SAFE_INTEGER - Ray's range.\n *\n * @return {object} Ray object.\n */\nexport function setRay(x, y, angle, range = Phaser.Math.MAX_SAFE_INTEGER) {\n    this.origin.setTo(x, y);\n    this.angle = Phaser.Math.Angle.Normalize(angle);\n    this.range = range;\n\n    Phaser.Geom.Line.SetToAngle(this._ray, this.origin.x, this.origin.y, this.angle, this.range);\n    this.detectionRangeCircle.setTo(this.origin.x, this.origin.y,this.detectionRange);\n    return this;\n}\n","/**\r\n* @author       Marcin Walczak <mail@marcinwalczak.pl>\r\n* @copyright    2020 Marcin Walczak\r\n* @license      {@link https://github.com/wiserim/phaser-raycaster/blob/master/LICENSE|MIT License}\r\n*/\r\n\r\n/**\r\n * @classdesc\r\n *\r\n * Raycaster class responible for creating ray objects and managing mapped objects.\r\n *\r\n * @class Raycaster\r\n * @constructor\r\n * @since 6.0.0\r\n *\r\n * @param {object} options - Ray specific configuration settings.\r\n */\r\nexport function Raycaster(options) {\r\n    this.version = '0.7.1';\r\n    this.scene;\r\n    this.graphics;\r\n    this.boundingBox = false;\r\n    this.mappedObjects = [];\r\n    this.sortedPoints = [];\r\n    this.mapSegmentCount = 0;   //quantity of segments of map of circle\r\n\r\n    if(options !== undefined) {\r\n        if(options.boundingBox === undefined && options.scene !== undefined && options.scene.physics !== undefined)\r\n            options.boundingBox = options.scene.physics.world.bounds;\r\n\r\n        this.setOptions(options);\r\n\r\n        if(options.autoUpdate === undefined || options.autoUpdate)\r\n            //automatically update event\r\n            this.scene.events.on('update', this.update.bind(this));\r\n    }\r\n    else\r\n        //automatically update event\r\n        this.scene.events.on('update', this.update.bind(this));\r\n\r\n    return this;\r\n}\r\n\r\nRaycaster.prototype = {\r\n    //set options\r\n    setOptions: function(options) {\r\n        if(options.scene !== undefined) {\r\n            this.scene = options.scene;\r\n            this.graphics =  this.scene.add.graphics({ lineStyle: { width: 1, color: 0x00ff00}, fillStyle: { color: 0xff00ff } });\r\n        }\r\n\r\n        if(options.mapSegmentCount !== undefined)\r\n            this.mapSegmentCount = options.mapSegmentCount;\r\n\r\n        if(options.objects !== undefined)\r\n            this.mapGameObjects(options.objects);\r\n\r\n        if(options.boundingBox !== undefined)\r\n            this.setBoundingBox(options.boundingBox.x, options.boundingBox.y, options.boundingBox.width, options.boundingBox.height)\r\n\r\n        return this;\r\n    },\r\n\r\n    //set bounding box\r\n    setBoundingBox: function(x, y, width, height) {\r\n        this.boundingBox = {\r\n            rectangle: new Phaser.Geom.Rectangle(x, y, width, height),\r\n            points: [],\r\n            segments: []\r\n        }\r\n        //set points\r\n        let points = [\r\n            new Phaser.Geom.Point(this.boundingBox.rectangle.left, this.boundingBox.rectangle.top),\r\n            new Phaser.Geom.Point(this.boundingBox.rectangle.right, this.boundingBox.rectangle.top),\r\n            new Phaser.Geom.Point(this.boundingBox.rectangle.right, this.boundingBox.rectangle.bottom),\r\n            new Phaser.Geom.Point(this.boundingBox.rectangle.left, this.boundingBox.rectangle.bottom)\r\n        ];\r\n\r\n        this.boundingBox.points = points;\r\n\r\n        //set segments\r\n        for(let i = 0, length = this.boundingBox.points.length; i < length; i++) {\r\n            if(i+1 < length)\r\n            this.boundingBox.segments.push(new Phaser.Geom.Line(points[i].x, points[i].y, points[i+1].x, points[i+1].y));\r\n            else\r\n            this.boundingBox.segments.push(new Phaser.Geom.Line(points[i].x, points[i].y, points[0].x, points[0].y));\r\n        }\r\n    },\r\n\r\n    //map object\r\n    mapGameObjects: function(objects, dynamic = false, segmentCount = this.mapSegmentCount) {\r\n        if(!Array.isArray(objects)) {\r\n            if(this.mappedObjects.includes(objects))\r\n                return this;\r\n\r\n            if(!objects.data)\r\n                objects.setDataEnabled();\r\n\r\n            let map = new this.Map({\r\n                object: objects,\r\n                dynamic: dynamic,\r\n                segmentCount: segmentCount\r\n            });\r\n\r\n            objects.data.set('raycasterMap', map);\r\n            this.mappedObjects.push(objects);\r\n\r\n            return this;\r\n        }\r\n        \r\n        for(let object of objects) {\r\n            if(this.mappedObjects.includes(object))\r\n                continue;\r\n\r\n            if(!object.data)\r\n                object.setDataEnabled();\r\n\r\n            let map = new this.Map({\r\n                object: object,\r\n                dynamic: dynamic,\r\n                segmentCount: segmentCount\r\n            });\r\n\r\n            object.data.set('raycasterMap', map);\r\n            this.mappedObjects.push(object);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    //remove mapped Objects\r\n    removeMappedObjects: function(objects) {\r\n        if(!Array.isArray(objects)) {\r\n            let index = this.mappedObjects.indexOf(objects);\r\n            if(index >= 0)\r\n                this.mappedObjects.splice(index, 1)\r\n            return this;\r\n        }\r\n\r\n        for(let object of objects) {\r\n            let index = this.mappedObjects.indexOf(object);\r\n            if(index >= 0)\r\n                this.mappedObjects.splice(index, 1)\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    //scene update event listener\r\n    update: function() {\r\n        //update dynamic maps\r\n        if(this.mappedObjects.length > 0)\r\n            for(let mapppedObject of this.mappedObjects) {\r\n                if(mapppedObject.data === undefined)\r\n                    continue;\r\n\r\n                let map = mapppedObject.data.get('raycasterMap')\r\n                if(map.dynamic)\r\n                    map.updateMap();\r\n            }\r\n    },\r\n\r\n    //ray factory\r\n    createRay: function(options = {}) {\r\n        return new this.Ray(options, this);\r\n    }\r\n}\r\n\r\nRaycaster.prototype.Map = require('./map/map-core.js').Map;\r\nRaycaster.prototype.Ray = require('./ray/ray-core.js').Ray;\r\n"],"sourceRoot":""}